description: Generates report using Allure Framework
parameters:
  configuration-path:
    description: Path to Allure configuration, uses default one if omitted
    type: string
    default: /usr/local/share/allure/config/allure.yml
  target-path:
    description: Path for report directory
    type: string
    default: allure-report
  results-path:
    description: Path to directory with test results
    type: string
    default: allure-results
  artifact-path:
    description: Path that will be used when storing result as artifact
    type: string
    default: Report/Allure
steps:
  - run:
      name: Allure report generation (<< parameters.results-path >> -> << parameters.target-path >>)
      command: |
        allure generate \
          --config << parameters.configuration-path >> \
          --report-dir << parameters.target-path >> \
          << parameters.results-path >>
  - store_artifacts:
      path: << parameters.target-path >>
      destination: << parameters.artifact-path >>